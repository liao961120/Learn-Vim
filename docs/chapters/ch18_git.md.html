<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learn Vim (the Smart Way) - 18&nbsp; Ch18. Git</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
q { quotes: "“" "”" "‘" "’"; }
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/ch19_compile.md.html" rel="next">
<link href="../chapters/ch17_fold.md.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Ch18. Git</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Learn Vim (the Smart Way)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/liao961120/Learn-Vim" title="" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch01_starting_vim.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Ch01. Starting Vim</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch02_buffers_windows_tabs.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ch02. Buffers, Windows, and Tabs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch03_searching_files.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ch03. Searching Files</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch04_vim_grammar.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Ch04. Vim Grammar</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch05_moving_in_file.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ch05. Moving in a File</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch06_insert_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ch06. Insert Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch07_the_dot_command.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Ch07. the Dot Command</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch08_registers.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Ch08. Registers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch09_macros.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Ch09. Macros</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch10_undo.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ch10. Undo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch11_visual_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ch11. Visual Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch12_search_and_substitute.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Ch12. Search and Substitute</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch13_the_global_command.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Ch13. the Global Command</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch14_external_commands.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ch14. External Commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch15_command-line_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ch15. Command-line Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch16_tags.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Ch16. Tags</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch17_fold.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Ch17. Fold</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch18_git.md.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Ch18. Git</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch19_compile.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Ch19. Compile</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch20_views_sessions_viminfo.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Ch20. Views, Sessions, and Viminfo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch21_multiple_file_operations.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Multiple File Operations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch22_vimrc.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Ch22. Vimrc</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch23_vim_packages.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Ch23. Vim Packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch24_vim_runtime.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Ch24. Vim Runtime</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch25_vimscript_basic_data_types.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Ch25. Vimscript Basic Data Types</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch26_vimscript_conditionals_and_loops.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Ch26. Vimscript Conditionals and Loops</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch27_vimscript_variable_scopes.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ch27. Vimscript Variable Scopes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch28_vimscript_functions.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Ch28. Vimscript Functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch29_plugin_example_writing-a-titlecase-plugin.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Ch29. Write a Plugin: Creating a Titlecase Operator</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#diffing" id="toc-diffing" class="nav-link active" data-scroll-target="#diffing"><span class="toc-section-number">18.1</span>  Diffing</a></li>
  <li><a href="#vim-as-a-merge-tool" id="toc-vim-as-a-merge-tool" class="nav-link" data-scroll-target="#vim-as-a-merge-tool"><span class="toc-section-number">18.2</span>  Vim As a Merge Tool</a></li>
  <li><a href="#git-inside-vim" id="toc-git-inside-vim" class="nav-link" data-scroll-target="#git-inside-vim"><span class="toc-section-number">18.3</span>  Git Inside Vim</a></li>
  <li><a href="#plugins" id="toc-plugins" class="nav-link" data-scroll-target="#plugins"><span class="toc-section-number">18.4</span>  Plugins</a></li>
  <li><a href="#vim-fugitive" id="toc-vim-fugitive" class="nav-link" data-scroll-target="#vim-fugitive"><span class="toc-section-number">18.5</span>  Vim-fugitive</a></li>
  <li><a href="#git-status" id="toc-git-status" class="nav-link" data-scroll-target="#git-status"><span class="toc-section-number">18.6</span>  Git Status</a></li>
  <li><a href="#git-blame" id="toc-git-blame" class="nav-link" data-scroll-target="#git-blame"><span class="toc-section-number">18.7</span>  Git Blame</a></li>
  <li><a href="#gdiffsplit" id="toc-gdiffsplit" class="nav-link" data-scroll-target="#gdiffsplit"><span class="toc-section-number">18.8</span>  Gdiffsplit</a></li>
  <li><a href="#gwrite-and-gread" id="toc-gwrite-and-gread" class="nav-link" data-scroll-target="#gwrite-and-gread"><span class="toc-section-number">18.9</span>  Gwrite and Gread</a></li>
  <li><a href="#gclog" id="toc-gclog" class="nav-link" data-scroll-target="#gclog"><span class="toc-section-number">18.10</span>  Gclog</a></li>
  <li><a href="#more-vim-fugitive" id="toc-more-vim-fugitive" class="nav-link" data-scroll-target="#more-vim-fugitive"><span class="toc-section-number">18.11</span>  More Vim-fugitive</a></li>
  <li><a href="#learn-vim-and-git-the-smart-way" id="toc-learn-vim-and-git-the-smart-way" class="nav-link" data-scroll-target="#learn-vim-and-git-the-smart-way"><span class="toc-section-number">18.12</span>  Learn Vim and Git the Smart Way</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Ch18. Git</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Vim and git are two great tools for two different things. Git is a version control tool. Vim is a text editor.</p>
<p>In this chapter, you will learn different ways to integrate Vim and git together.</p>
<section id="diffing" class="level2" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="diffing"><span class="header-section-number">18.1</span> Diffing</h2>
<p>Recall in the previous chapter, you can run a <code>vimdiff</code> command to show the differences between multiple files.</p>
<p>Suppose you have two files, <code>file1.txt</code> and <code>file2.txt</code>.</p>
<p>Inside <code>file1.txt</code>:</p>
<pre><code>pancakes
waffles
apples

milk
apple juice

yogurt</code></pre>
<p>Inside <code>file2.txt</code>:</p>
<pre><code>pancakes
waffles
oranges

milk
orange juice

yogurt</code></pre>
<p>To see the differences between both files, run:</p>
<pre><code>vimdiff file1.txt file2.txt</code></pre>
<p>Alternatively you could run:</p>
<pre><code>vim -d file1.txt file2.txt</code></pre>
<p><code>vimdiff</code> displays two buffers side-by-side. On the left is <code>file1.txt</code> and on the right is <code>file2.txt</code>. The first differences (apples and oranges) are highlighted on both lines.</p>
<p>Suppose you want to make the second buffer to have apples, not oranges. To transfer the content from your current position (you’re currently on <code>file1.txt</code>) to <code>file2.txt</code>, first go to the next diff with <code>]c</code> (to jump to the previous diff window, use <code>[c</code>). The cursor should be on apples now. Run <code>:diffput</code>. Both files should now have apples.</p>
<p>If you need to transfer the text from the other buffer (orange juice, <code>file2.txt</code>) to replace the text on the current buffer (apple juice, <code>file1.txt</code>), with your cursor still on <code>file1.txt</code> window, first go to the next diff with <code>]c</code>. Your cursor now should be on apple juice. Run <code>:diffget</code> to get the orange juice from another buffer to replace apple juice in our buffer.</p>
<p><code>:diffput</code> <em>puts out</em> the text from the current buffer to another buffer. <code>:diffget</code> <em>gets</em> the text from another buffer to the current buffer.</p>
<p>If you have multiple buffers, you can run <code>:diffput fileN.txt</code> and <code>:diffget fileN.txt</code> to target the the fileN buffer.</p>
</section>
<section id="vim-as-a-merge-tool" class="level2" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="vim-as-a-merge-tool"><span class="header-section-number">18.2</span> Vim As a Merge Tool</h2>
<blockquote class="blockquote">
<p><q>I love resolving merge conflicts!</q> - Nobody</p>
</blockquote>
<p>I don’t know anyone who likes resolving merge conflicts. However, they are inevitable. In this section, you will learn how to leverage Vim as a merge conflict resolution tool.</p>
<p>First, change the default merge tool to use <code>vimdiff</code> by running:</p>
<pre><code>git config merge.tool vimdiff
git config merge.conflictstyle diff3
git config mergetool.prompt false</code></pre>
<p>Alternatively, you can modify the <code>~/.gitconfig</code> directly (by default it should be in root, but yours might be in different place). The commands above should modify your gitconfig to look like the setting below, if you haven’t run them already, you can also manually edit your gitconfig.</p>
<pre><code>[core]
  editor = vim
[merge]
  tool = vimdiff
  conflictstyle = diff3
[difftool]
  prompt = false</code></pre>
<p>Let’s create a fake merge conflict to test this out. Create a directory <code>/food</code> and make it a git repository:</p>
<pre><code>git init</code></pre>
<p>Add a file, <code>breakfast.txt</code>. Inside:</p>
<pre><code>pancakes
waffles
oranges</code></pre>
<p>Add the file and commit it:</p>
<pre><code>git add .
git commit -m "Initial breakfast commit"</code></pre>
<p>Next, create a new branch and call it apples branch:</p>
<pre><code>git checkout -b apples</code></pre>
<p>Change the <code>breakfast.txt</code>:</p>
<pre><code>pancakes
waffles
apples</code></pre>
<p>Save the file, then add and commit the change:</p>
<pre><code>git add .
git commit -m "Apples not oranges"</code></pre>
<p>Great. Now you have oranges in the master branch and apples in the apples branch. Let’s return to the master branch:</p>
<pre><code>git checkout master</code></pre>
<p>Inside <code>breakfast.txt</code>, you should see the base text, oranges. Let’s change it to grapes because they are in season right now:</p>
<pre><code>pancakes
waffles
grapes</code></pre>
<p>Save, add, and commit:</p>
<pre><code>git add .
git commit -m "Grapes not oranges"</code></pre>
<p>Now you are ready to merge the apples branch into the master branch:</p>
<pre><code>git merge apples</code></pre>
<p>You should see an error:</p>
<pre><code>Auto-merging breakfast.txt
CONFLICT (content): Merge conflict in breakfast.txt
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
<p>A conflict, great! Let’s resolve the conflict using our newly-configured <code>mergetool</code>. Run:</p>
<pre><code>git mergetool</code></pre>
<p>Vim displays four windows. Pay attention to the top three:</p>
<ul>
<li><code>LOCAL</code> contains <code>grapes</code>. This is the change in <q>local</q>, what you are merging into.</li>
<li><code>BASE</code> contains <code>oranges</code>. This is the common ancestor between <code>LOCAL</code> and <code>REMOTE</code> to compare how they diverge.</li>
<li><code>REMOTE</code> contains <code>apples</code>. This is what is being merged into.</li>
</ul>
<p>At the bottom (the fourth window) you see:</p>
<pre><code>pancakes
waffles
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
grapes
||||||| db63958
oranges
=======
apples
&gt;&gt;&gt;&gt;&gt;&gt;&gt; apples</code></pre>
<p>The fourth window contains the merge conflict texts. With this setup, it is easier to see what change each environment has. You can see the content from <code>LOCAL</code>, <code>BASE</code>, and <code>REMOTE</code> at the same time.</p>
<p>Your cursor should be on the fourth windows, on the highlighted area. To get the change from <code>LOCAL</code> (grapes), run <code>:diffget LOCAL</code>. To get the change from <code>BASE</code> (oranges), run <code>:diffget BASE</code> and to get the change from <code>REMOTE</code> (apples), run <code>:diffget REMOTE</code>.</p>
<p>In this case, let’s get the change from <code>LOCAL</code>. Run <code>:diffget LOCAL</code>. The fourth window will now have grapes. Save and exit all files (<code>:wqall</code>) when you are done. That wasn’t bad, right?</p>
<p>If you notice, you also have a file <code>breakfast.txt.orig</code> now. Git creates a backup file in case things don’t go well. If you don’t want git to create a backup during a merge, run:</p>
<pre><code>git config --global mergetool.keepBackup false</code></pre>
</section>
<section id="git-inside-vim" class="level2" data-number="18.3">
<h2 data-number="18.3" class="anchored" data-anchor-id="git-inside-vim"><span class="header-section-number">18.3</span> Git Inside Vim</h2>
<p>Vim does not have a native git feature built-in. One way to run git commands from Vim is to use the bang operator, <code>!</code>, in the command-line mode.</p>
<p>Any git command can be run with <code>!</code>:</p>
<pre><code>:!git status
:!git commit
:!git diff
:!git push origin master</code></pre>
<p>You can also use Vim’s <code>%</code> (current buffer) or <code>#</code> (other buffer) conventions:</p>
<pre><code>:!git add %         " git add current file
:!git checkout #    " git checkout the other file</code></pre>
<p>One Vim trick you can use to add multiple files in different Vim window is to run:</p>
<pre><code>:windo !git add %</code></pre>
<p>Then make a commit:</p>
<pre><code>:!git commit "Just git-added everything in my Vim window, cool"</code></pre>
<p>The <code>windo</code> command is one of Vim’s <q>do</q> commands, similar to <code>argdo</code> that you saw previously. <code>windo</code> executes the command on each window.</p>
<p>Alternatively, you can also use <code>bufdo !git add %</code> to git add all buffers or <code>argdo !git add %</code> to git add all the file arguments, depending on your workflow.</p>
</section>
<section id="plugins" class="level2" data-number="18.4">
<h2 data-number="18.4" class="anchored" data-anchor-id="plugins"><span class="header-section-number">18.4</span> Plugins</h2>
<p>There are many Vim plugins for git support. Below is a list of some of the popular git-related plugins for Vim (there is probably more at the time you read this):</p>
<ul>
<li><a href="https://github.com/airblade/vim-gitgutter">vim-gitgutter</a></li>
<li><a href="https://github.com/mhinz/vim-signify">vim-signify</a></li>
<li><a href="https://github.com/tpope/vim-fugitive">vim-fugitive</a></li>
<li><a href="https://github.com/junegunn/gv.vim">gv.vim</a></li>
<li><a href="https://github.com/jreybert/vimagit">vimagit</a></li>
<li><a href="https://github.com/sodapopcan/vim-twiggy">vim-twiggy</a></li>
<li><a href="https://github.com/tpope/vim-rhubarb">rhubarb</a></li>
</ul>
<p>One of the most popular ones is vim-fugitive. For the remaining of the chapter, I will go over a several git workflow using this plugin.</p>
</section>
<section id="vim-fugitive" class="level2" data-number="18.5">
<h2 data-number="18.5" class="anchored" data-anchor-id="vim-fugitive"><span class="header-section-number">18.5</span> Vim-fugitive</h2>
<p>The vim-fugitive plugin allows you to run the git CLI without leaving the Vim editor. You will find that some commands are better when executed from inside Vim.</p>
<p>To get started, install the vim-fugitive with a Vim plugin manager (<a href="https://github.com/junegunn/vim-plug">vim-plug</a>, <a href="https://github.com/VundleVim/Vundle.vim">vundle</a>, <a href="https://github.com/Shougo/dein.vim">dein.vim</a>, etc).</p>
</section>
<section id="git-status" class="level2" data-number="18.6">
<h2 data-number="18.6" class="anchored" data-anchor-id="git-status"><span class="header-section-number">18.6</span> Git Status</h2>
<p>When you run the <code>:Git</code> command without any parameters, vim-fugitive displays a git summary window. It shows the untracked, unstaged, and staged file(s). While in this <q><code>git status</code></q> mode, you can do several things: - <code>Ctrl-N</code> / <code>Ctrl-P</code> to go up or down the file list. - <code>-</code> to stage or unstage the file name under the cursor. - <code>s</code> to stage the file name under the cursor. - <code>u</code> to unstage the file name under the cursor. - <code>&gt;</code> / <code>&lt;</code> to display or hide an inline diff of the file name under the cursor.</p>
<p>For more, check out <code>:h fugitive-staging-maps</code>.</p>
</section>
<section id="git-blame" class="level2" data-number="18.7">
<h2 data-number="18.7" class="anchored" data-anchor-id="git-blame"><span class="header-section-number">18.7</span> Git Blame</h2>
<p>When you run the <code>:Git blame</code> command from the current file, vim-fugitive displays a split blame window. This can be useful to find the person responsible for writing that buggy line of code so you can yell at him / her (just kidding).</p>
<p>Some things you can do while in this <code>"git blame"</code> mode: - <code>q</code> to close the blame window. - <code>A</code> to resize the author column. - <code>C</code> to resize the commit column. - <code>D</code> to resize the date / time column.</p>
<p>For more, check out <code>:h :Git_blame</code>.</p>
</section>
<section id="gdiffsplit" class="level2" data-number="18.8">
<h2 data-number="18.8" class="anchored" data-anchor-id="gdiffsplit"><span class="header-section-number">18.8</span> Gdiffsplit</h2>
<p>When you run the <code>:Gdiffsplit</code> command, vim-fugitive runs a <code>vimdiff</code> of the current file’s latest changes against the index or work tree. If you run <code>:Gdiffsplit &lt;commit&gt;</code>, vim-fugitive runs a <code>vimdiff</code> against that file inside <code>&lt;commit&gt;</code>.</p>
<p>Because you are in a <code>vimdiff</code> mode, you can <em>get</em> or <em>put</em> the diff with <code>:diffput</code> and <code>:diffget</code>.</p>
</section>
<section id="gwrite-and-gread" class="level2" data-number="18.9">
<h2 data-number="18.9" class="anchored" data-anchor-id="gwrite-and-gread"><span class="header-section-number">18.9</span> Gwrite and Gread</h2>
<p>When you run the <code>:Gwrite</code> command in a file after you make changes, vim-fugitive stages the changes. It is like running <code>git add &lt;current-file&gt;</code>.</p>
<p>When you run the <code>:Gread</code> command in a file after you make changes, vim-fugitive restores the file to the state prior to the changes. It is like running <code>git checkout &lt;current-file&gt;</code>. One advantage of running <code>:Gread</code> is the action is undo-able. If, after you run <code>:Gread</code>, you change your mind and want to keep the old change, you can just run undo (<code>u</code>) and Vim will undo the <code>:Gread</code> action. This would not have been possible if you had run <code>git checkout &lt;current-file&gt;</code> from the CLI.</p>
</section>
<section id="gclog" class="level2" data-number="18.10">
<h2 data-number="18.10" class="anchored" data-anchor-id="gclog"><span class="header-section-number">18.10</span> Gclog</h2>
<p>When you run the <code>:Gclog</code> command, vim-fugitive displays the commit history. It is like running the <code>git log</code> command. Vim-fugitive uses Vim’s quickfix to accomplish this, so you can use <code>:cnext</code> and <code>:cprevious</code> to traverse to the next or previous log information. You can open and close the log list with <code>:copen</code> and <code>:cclose</code>.</p>
<p>While in this <code>"git log"</code> mode, you can do two things: - View the tree. - Visit the parent (the previous commit).</p>
<p>You can pass to <code>:Gclog</code> arguments just like the <code>git log</code> command. If your project has a long commit history and you only need to view the last three commits, you can run <code>:Gclog -3</code>. If you need to filter it based on the committer’s date, you can run something like <code>:Gclog --after="January 1" --before="March 14"</code>.</p>
</section>
<section id="more-vim-fugitive" class="level2" data-number="18.11">
<h2 data-number="18.11" class="anchored" data-anchor-id="more-vim-fugitive"><span class="header-section-number">18.11</span> More Vim-fugitive</h2>
<p>These are only a few examples of what vim-fugitive can do. To learn more about vim-fugitive, check out <code>:h fugitive.txt</code>. Most of the popular git commands are probably optimized with vim-fugitive. You just have to look for them in the documentation.</p>
<p>If you are inside one of vim-fugitive’s <q>special mode</q> (for example, inside <code>:Git</code> or <code>:Git blame</code> mode) and you want to learn what shortcuts are available, press <code>g?</code>. Vim-fugitive will display the appropriate <code>:help</code> window for the mode you are in. Neat!</p>
</section>
<section id="learn-vim-and-git-the-smart-way" class="level2" data-number="18.12">
<h2 data-number="18.12" class="anchored" data-anchor-id="learn-vim-and-git-the-smart-way"><span class="header-section-number">18.12</span> Learn Vim and Git the Smart Way</h2>
<p>You may find vim-fugitive to be a good compliment to your workflow (or not). Regardless, I would strongly encourage you to check out all the plugins listed above. There are probably others I didn’t list. Go try them out.</p>
<p>One obvious way to get better with Vim-git integration is to read more about git. Git, on its own, is a vast topic and I am only showing a fraction of it. With that, let’s <em>git going</em> (pardon the pun) and talk about how to use Vim to compile your code!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/ch17_fold.md.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Ch17. Fold</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/ch19_compile.md.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Ch19. Compile</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>