<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learn Vim (the Smart Way) - 26&nbsp; Ch26. Vimscript Conditionals and Loops</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
q { quotes: "“" "”" "‘" "’"; }
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/ch27_vimscript_variable_scopes.md.html" rel="next">
<link href="../chapters/ch25_vimscript_basic_data_types.md.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Ch26. Vimscript Conditionals and Loops</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Learn Vim (the Smart Way)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/liao961120/Learn-Vim" title="" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch01_starting_vim.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Ch01. Starting Vim</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch02_buffers_windows_tabs.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ch02. Buffers, Windows, and Tabs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch03_searching_files.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ch03. Searching Files</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch04_vim_grammar.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Ch04. Vim Grammar</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch05_moving_in_file.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ch05. Moving in a File</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch06_insert_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ch06. Insert Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch07_the_dot_command.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Ch07. the Dot Command</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch08_registers.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Ch08. Registers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch09_macros.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Ch09. Macros</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch10_undo.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ch10. Undo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch11_visual_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ch11. Visual Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch12_search_and_substitute.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Ch12. Search and Substitute</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch13_the_global_command.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Ch13. the Global Command</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch14_external_commands.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ch14. External Commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch15_command-line_mode.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ch15. Command-line Mode</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch16_tags.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Ch16. Tags</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch17_fold.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Ch17. Fold</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch18_git.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Ch18. Git</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch19_compile.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Ch19. Compile</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch20_views_sessions_viminfo.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Ch20. Views, Sessions, and Viminfo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch21_multiple_file_operations.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Multiple File Operations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch22_vimrc.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Ch22. Vimrc</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch23_vim_packages.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Ch23. Vim Packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch24_vim_runtime.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Ch24. Vim Runtime</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch25_vimscript_basic_data_types.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Ch25. Vimscript Basic Data Types</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch26_vimscript_conditionals_and_loops.md.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Ch26. Vimscript Conditionals and Loops</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch27_vimscript_variable_scopes.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ch27. Vimscript Variable Scopes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch28_vimscript_functions.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Ch28. Vimscript Functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ch29_plugin_example_writing-a-titlecase-plugin.md.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Ch29. Write a Plugin: Creating a Titlecase Operator</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#relational-operators" id="toc-relational-operators" class="nav-link active" data-scroll-target="#relational-operators"><span class="toc-section-number">26.1</span>  Relational Operators</a>
  <ul class="collapse">
  <li><a href="#string-logic-operators" id="toc-string-logic-operators" class="nav-link" data-scroll-target="#string-logic-operators"><span class="toc-section-number">26.1.1</span>  String Logic Operators</a></li>
  </ul></li>
  <li><a href="#if" id="toc-if" class="nav-link" data-scroll-target="#if"><span class="toc-section-number">26.2</span>  If</a></li>
  <li><a href="#ternary-expression" id="toc-ternary-expression" class="nav-link" data-scroll-target="#ternary-expression"><span class="toc-section-number">26.3</span>  Ternary Expression</a></li>
  <li><a href="#or" id="toc-or" class="nav-link" data-scroll-target="#or"><span class="toc-section-number">26.4</span>  or</a></li>
  <li><a href="#and" id="toc-and" class="nav-link" data-scroll-target="#and"><span class="toc-section-number">26.5</span>  and</a></li>
  <li><a href="#for" id="toc-for" class="nav-link" data-scroll-target="#for"><span class="toc-section-number">26.6</span>  for</a></li>
  <li><a href="#while" id="toc-while" class="nav-link" data-scroll-target="#while"><span class="toc-section-number">26.7</span>  While</a></li>
  <li><a href="#error-handling" id="toc-error-handling" class="nav-link" data-scroll-target="#error-handling"><span class="toc-section-number">26.8</span>  Error Handling</a>
  <ul class="collapse">
  <li><a href="#break" id="toc-break" class="nav-link" data-scroll-target="#break"><span class="toc-section-number">26.8.1</span>  Break</a></li>
  <li><a href="#continue" id="toc-continue" class="nav-link" data-scroll-target="#continue"><span class="toc-section-number">26.8.2</span>  Continue</a></li>
  <li><a href="#try-finally-and-catch" id="toc-try-finally-and-catch" class="nav-link" data-scroll-target="#try-finally-and-catch"><span class="toc-section-number">26.8.3</span>  try, finally, and catch</a></li>
  </ul></li>
  <li><a href="#learn-conditionals-the-smart-way" id="toc-learn-conditionals-the-smart-way" class="nav-link" data-scroll-target="#learn-conditionals-the-smart-way"><span class="toc-section-number">26.9</span>  Learn Conditionals the Smart Way</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Ch26. Vimscript Conditionals and Loops</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>After learning what the basic data types are, the next step is to learn how to combine them together to start writing a basic program. A basic program consists of conditionals and loops.</p>
<p>In this chapter, you will learn how to use Vimscript data types to write conditionals and loops.</p>
<section id="relational-operators" class="level2" data-number="26.1">
<h2 data-number="26.1" class="anchored" data-anchor-id="relational-operators"><span class="header-section-number">26.1</span> Relational Operators</h2>
<p>Vimscript relational operators are similar to many programming languages:</p>
<pre><code>a == b      equal to
a != b      not equal to
a &gt;  b      greater than
a &gt;= b      greater than or equal to
a &lt;  b      less than
a &lt;= b      less than or equal to</code></pre>
<p>For example:</p>
<pre><code>:echo 5 == 5
:echo 5 != 5
:echo 10 &gt; 5
:echo 10 &gt;= 5
:echo 10 &lt; 5
:echo 5 &lt;= 5</code></pre>
<p>Recall that strings are coerced into numbers in an arithmetic expression. Here Vim also coerces strings into numbers in an equality expression. <q>5foo</q> is coerced into 5 (truthy):</p>
<pre><code>:echo 5 == "5foo"
" returns true</code></pre>
<p>Also recall that if you start a string with a non-numerical character like <q>foo5</q>, the string is converted into number 0 (falsy).</p>
<pre><code>echo 5 == "foo5"
" returns false</code></pre>
<section id="string-logic-operators" class="level3" data-number="26.1.1">
<h3 data-number="26.1.1" class="anchored" data-anchor-id="string-logic-operators"><span class="header-section-number">26.1.1</span> String Logic Operators</h3>
<p>Vim has more relational operators for comparing strings:</p>
<pre><code>a =~ b
a !~ b</code></pre>
<p>For examples:</p>
<pre><code>let str = "hearty breakfast"

echo str =~ "hearty"
" returns true

echo str =~ "dinner"
" returns false

echo str !~ "dinner"
" returns true</code></pre>
<p>The <code>=~</code> operator performs a regex match against the given string. In the example above, <code>str =~ "hearty"</code> returns true because <code>str</code> <em>contains</em> the <q>hearty</q> pattern. You can always use <code>==</code> and <code>!=</code>, but using them will compare the expression against the entire string. <code>=~</code> and <code>!~</code> are more flexible choices.</p>
<pre><code>echo str == "hearty"
" returns false

echo str == "hearty breakfast"
" returns true</code></pre>
<p>Let’s try this one. Note the uppercase <q>H</q>:</p>
<pre><code>echo str =~ "Hearty"
" true</code></pre>
<p>It returns true even though <q>Hearty</q> is capitalized. Interesting… It turns out that my Vim setting is set to ignore case (<code>set ignorecase</code>), so when Vim checks for equality, it uses my Vim setting and ignores the case. If I were to turn off ignore case (<code>set noignorecase</code>), the comparison now returns false.</p>
<pre><code>set noignorecase
echo str =~ "Hearty"
" returns false because case matters

set ignorecase
echo str =~ "Hearty"
" returns true because case doesn't matter</code></pre>
<p>If you are writing a plugin for others, this is a tricky situation. Does the user use <code>ignorecase</code> or <code>noignorecase</code>? You definitely do <em>not</em> want to force your users to change their ignore case option. So what do you do?</p>
<p>Luckily, Vim has an operator that can <em>always</em> ignore or match case. To always match case, add a <code>#</code> at the end.</p>
<pre><code>set ignorecase
echo str =~# "hearty"
" returns true

echo str =~# "HearTY"
" returns false

set noignorecase
echo str =~# "hearty"
" true

echo str =~# "HearTY"
" false

echo str !~# "HearTY"
" true</code></pre>
<p>To always ignore case when comparing, append it with <code>?</code>:</p>
<pre><code>set ignorecase
echo str =~? "hearty"
" true

echo str =~? "HearTY"
" true

set noignorecase
echo str =~? "hearty"
" true

echo str =~? "HearTY"
" true

echo str !~? "HearTY"
" false</code></pre>
<p>I prefer to use <code>#</code> to always match the case and be on the safe side.</p>
</section>
</section>
<section id="if" class="level2" data-number="26.2">
<h2 data-number="26.2" class="anchored" data-anchor-id="if"><span class="header-section-number">26.2</span> If</h2>
<p>Now that you have seen Vim’s equality expressions, let’s touch a fundamental conditional operator, the <code>if</code> statement.</p>
<p>At minimum, the syntax is:</p>
<pre><code>if {clause}
  {some expression}
endif</code></pre>
<p>You can extend the case analysis with <code>elseif</code> and <code>else</code>.</p>
<pre><code>if {predicate1}
  {expression1}
elseif {predicate2}
  {expression2}
elseif {predicate3}
  {expression3}
else
  {expression4}
endif</code></pre>
<p>For example, the plugin <a href="https://github.com/mhinz/vim-signify">vim-signify</a> uses a different installation method depending on your Vim settings. Below is the installation instruction from their <code>readme</code>, using the <code>if</code> statement:</p>
<pre><code>if has('nvim') || has('patch-8.0.902')
  Plug 'mhinz/vim-signify'
else
  Plug 'mhinz/vim-signify', { 'branch': 'legacy' }
endif</code></pre>
</section>
<section id="ternary-expression" class="level2" data-number="26.3">
<h2 data-number="26.3" class="anchored" data-anchor-id="ternary-expression"><span class="header-section-number">26.3</span> Ternary Expression</h2>
<p>Vim has a ternary expression for a one-liner case analysis:</p>
<pre><code>{predicate} ? expressiontrue : expressionfalse</code></pre>
<p>For example:</p>
<pre><code>echo 1 ? "I am true" : "I am false"</code></pre>
<p>Since 1 is truthy, Vim echoes <q>I am true</q>. Suppose you want to conditionally set the <code>background</code> to dark if you are using Vim past a certain hour. Add this to vimrc:</p>
<pre><code>let &amp;background = strftime("%H") &lt; 18 ? "light" : "dark"</code></pre>
<p><code>&amp;background</code> is the <code>'background'</code> option in Vim. <code>strftime("%H")</code> returns the current time in hours. If it is not yet 6 PM, use a light background. Otherwise, use a dark background.</p>
</section>
<section id="or" class="level2" data-number="26.4">
<h2 data-number="26.4" class="anchored" data-anchor-id="or"><span class="header-section-number">26.4</span> or</h2>
<p>The logical <q>or</q> (<code>||</code>) works like many programming languages.</p>
<pre><code>{Falsy expression}  || {Falsy expression}   false
{Falsy expression}  || {Truthy expression}  true
{Truthy expression} || {Falsy expression}   true
{Truthy expression} || {Truthy expression}  true</code></pre>
<p>Vim evaluates the expression and return either 1 (truthy) or 0 (falsy).</p>
<pre><code>echo 5 || 0
" returns 1

echo 5 || 5
" returns 1

echo 0 || 0
" returns 0

echo "foo5" || "foo5"
" returns 0

echo "5foo" || "foo5"
" returns 1</code></pre>
<p>If the current expression evaluates to truthy, the subsequent expression won’t be evaluated.</p>
<pre><code>let one_dozen = 12

echo one_dozen || two_dozen
" returns 1

echo two_dozen || one_dozen
" returns error</code></pre>
<p>Note that <code>two_dozen</code> is never defined. The expression <code>one_dozen || two_dozen</code> doesn’t throw any error because <code>one_dozen</code> is evaluated first found to be truthy, so Vim doesn’t evaluate <code>two_dozen</code>.</p>
</section>
<section id="and" class="level2" data-number="26.5">
<h2 data-number="26.5" class="anchored" data-anchor-id="and"><span class="header-section-number">26.5</span> and</h2>
<p>The logical <q>and</q> (<code>&amp;&amp;</code>) is the complement of the logical or.</p>
<pre><code>{Falsy Expression}  &amp;&amp; {Falsy Expression}   false
{Falsy expression}  &amp;&amp; {Truthy expression}  false
{Truthy Expression} &amp;&amp; {Falsy Expression}   false
{Truthy expression} &amp;&amp; {Truthy expression}  true</code></pre>
<p>For example:</p>
<pre><code>echo 0 &amp;&amp; 0
" returns 0

echo 0 &amp;&amp; 10
" returns 0</code></pre>
<p><code>&amp;&amp;</code> evaluates an expression until it sees the first falsy expression. For example, if you have <code>true &amp;&amp; true</code>, it will evaluate both and return <code>true</code>. If you have <code>true &amp;&amp; false &amp;&amp; true</code>, it will evaluate the first <code>true</code> and stop at the first <code>false</code>. It will not evaluate the third <code>true</code>.</p>
<pre><code>let one_dozen = 12
echo one_dozen &amp;&amp; 10
" returns 1

echo one_dozen &amp;&amp; v:false
" returns 0

echo one_dozen &amp;&amp; two_dozen
" returns error

echo exists("one_dozen") &amp;&amp; one_dozen == 12
" returns 1</code></pre>
</section>
<section id="for" class="level2" data-number="26.6">
<h2 data-number="26.6" class="anchored" data-anchor-id="for"><span class="header-section-number">26.6</span> for</h2>
<p>The <code>for</code> loop is commonly used with the list data type.</p>
<pre><code>let breakfasts = ["pancakes", "waffles", "eggs"]

for breakfast in breakfasts
  echo breakfast
endfor</code></pre>
<p>It works with nested list:</p>
<pre><code>let meals = [["breakfast", "pancakes"], ["lunch", "fish"], ["dinner", "pasta"]]

for [meal_type, food] in meals
  echo "I am having " . food . " for " . meal_type
endfor</code></pre>
<p>You can technically use the <code>for</code> loop with a dictionary using the <code>keys()</code> method.</p>
<pre><code>let beverages = #{breakfast: "milk", lunch: "orange juice", dinner: "water"}
for beverage_type in keys(beverages)
  echo "I am drinking " . beverages[beverage_type] . " for " . beverage_type
endfor</code></pre>
</section>
<section id="while" class="level2" data-number="26.7">
<h2 data-number="26.7" class="anchored" data-anchor-id="while"><span class="header-section-number">26.7</span> While</h2>
<p>Another common loop is the <code>while</code> loop.</p>
<pre><code>let counter = 1
while counter &lt; 5
  echo "Counter is: " . counter
  let counter += 1
endwhile</code></pre>
<p>To get the content of the current line to the last line:</p>
<pre><code>let current_line = line(".")
let last_line = line("$")

while current_line &lt;= last_line
  echo getline(current_line)
  let current_line += 1
endwhile</code></pre>
</section>
<section id="error-handling" class="level2" data-number="26.8">
<h2 data-number="26.8" class="anchored" data-anchor-id="error-handling"><span class="header-section-number">26.8</span> Error Handling</h2>
<p>Often your program doesn’t run the way you expect it to. As a result, it throws you for a loop (pun intended). What you need is a proper error handling.</p>
<section id="break" class="level3" data-number="26.8.1">
<h3 data-number="26.8.1" class="anchored" data-anchor-id="break"><span class="header-section-number">26.8.1</span> Break</h3>
<p>When you use <code>break</code> inside a <code>while</code> or <code>for</code> loop, it stops the loop.</p>
<p>To get the texts from the start of the file to the current line, but stop when you see the word <q>donut</q>:</p>
<pre><code>let line = 0
let last_line = line("$")
let total_word = ""

while line &lt;= last_line
  let line += 1
  let line_text = getline(line)
  if line_text =~# "donut"
    break
  endif
  echo line_text
  let total_word .= line_text . " "
endwhile

echo total_word</code></pre>
<p>If you have the text:</p>
<pre><code>one
two
three
donut
four
five</code></pre>
<p>Running the above <code>while</code> loop gives <q>one two three</q> and not the rest of the text because the loop breaks once it matches <q>donut</q>.</p>
</section>
<section id="continue" class="level3" data-number="26.8.2">
<h3 data-number="26.8.2" class="anchored" data-anchor-id="continue"><span class="header-section-number">26.8.2</span> Continue</h3>
<p>The <code>continue</code> method is similar to <code>break</code>, where it is invoked during a loop. The difference is that instead of breaking out of the loop, it just skips that current iteration.</p>
<p>Suppose you have the same text but instead of <code>break</code>, you use <code>continue</code>:</p>
<pre><code>let line = 0
let last_line = line("$")
let total_word = ""

while line &lt;= last_line
  let line += 1
  let line_text = getline(line)
  if line_text =~# "donut"
    continue
  endif
  echo line_text
  let total_word .= line_text . " "
endwhile

echo total_word</code></pre>
<p>This time it returns <code>one two three four five</code>. It skips the line with the word <q>donut</q>, but the loop continues.</p>
</section>
<section id="try-finally-and-catch" class="level3" data-number="26.8.3">
<h3 data-number="26.8.3" class="anchored" data-anchor-id="try-finally-and-catch"><span class="header-section-number">26.8.3</span> try, finally, and catch</h3>
<p>Vim has a <code>try</code>, <code>finally</code>, and <code>catch</code> to handle errors. To simulate an error, you can use the <code>throw</code> command.</p>
<pre><code>try
  echo "Try"
  throw "Nope"
endtry</code></pre>
<p>Run this. Vim will complain with <code>"Exception not caught: Nope</code> error.</p>
<p>Now add a catch block:</p>
<pre><code>try
  echo "Try"
  throw "Nope"
catch
  echo "Caught it"
endtry</code></pre>
<p>Now there is no longer any error. You should see <q>Try</q> and <q>Caught it</q> displayed.</p>
<p>Let’s remove the <code>catch</code> and add a <code>finally</code>:</p>
<pre><code>try
  echo "Try"
  throw "Nope"
  echo "You won't see me"
finally
  echo "Finally"
endtry</code></pre>
<p>Run this. Now Vim displays the error and <q>Finally</q>.</p>
<p>Let’s put all of them together:</p>
<pre><code>try
  echo "Try"
  throw "Nope"
catch
  echo "Caught it"
finally
  echo "Finally"
endtry</code></pre>
<p>This time Vim displays both <q>Caught it</q> and <q>Finally</q>. No error is displayed because Vim caught it.</p>
<p>Errors come from different places. Another source of error is calling a nonexistent function, like <code>Nope()</code> below:</p>
<pre><code>try
  echo "Try"
  call Nope()
catch
  echo "Caught it"
finally
  echo "Finally"
endtry</code></pre>
<p>The difference between <code>catch</code> and <code>finally</code> is that <code>finally</code> is always run, error or not, where a catch is only run when your code gets an error.</p>
<p>You can catch specific error with <code>:catch</code>. According to <code>:h :catch</code>:</p>
<pre><code>catch /^Vim:Interrupt$/.             " catch interrupts (CTRL-C)
catch /^Vim\\%((\\a\\+)\\)\\=:E/.    " catch all Vim errors
catch /^Vim\\%((\\a\\+)\\)\\=:/.     " catch errors and interrupts
catch /^Vim(write):/.                " catch all errors in :write
catch /^Vim\\%((\\a\\+)\\)\\=:E123:/ " catch error E123
catch /my-exception/.                " catch user exception
catch /.*/                           " catch everything
catch.                               " same as /.*/</code></pre>
<p>Inside a <code>try</code> block, an interrupt is considered a catchable error.</p>
<pre><code>try
  catch /^Vim:Interrupt$/
  sleep 100
endtry</code></pre>
<p>In your vimrc, if you use a custom colorscheme, like <a href="https://github.com/morhetz/gruvbox">gruvbox</a>, and you accidentally delete the colorscheme directory but still have the line <code>colorscheme gruvbox</code> in your vimrc, Vim will throw an error when you <code>source</code> it. To fix this, I added this in my vimrc:</p>
<pre><code>try
  colorscheme gruvbox
catch
  colorscheme default
endtry</code></pre>
<p>Now if you <code>source</code> vimrc without <code>gruvbox</code> directory, Vim will use the <code>colorscheme default</code>.</p>
</section>
</section>
<section id="learn-conditionals-the-smart-way" class="level2" data-number="26.9">
<h2 data-number="26.9" class="anchored" data-anchor-id="learn-conditionals-the-smart-way"><span class="header-section-number">26.9</span> Learn Conditionals the Smart Way</h2>
<p>In the previous chapter, you learned about Vim basic data types. In this chapter, you learned how to combine them to write basic programs using conditionals and loops. These are the building blocks of programming.</p>
<p>Next, let’s learn about variable scopes.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/ch25_vimscript_basic_data_types.md.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Ch25. Vimscript Basic Data Types</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/ch27_vimscript_variable_scopes.md.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ch27. Vimscript Variable Scopes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>